# Railway Nixpacks Config for Puppeteer
[phases.setup]
nixPkgs = [
    "nodejs",
    "npm",
    "chromium",
    "nss",
    "freetype",
    "harfbuzz",
    "ca-certificates",
    "ttf-freefont"
]

[phases.build]
cmds = ["npm ci", "npx prisma generate", "npx tsc"]

[start]
cmd = "node dist/server.js"

[variables]
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD = "true"
PUPPETEER_EXECUTABLE_PATH = "/usr/bin/chromium"
